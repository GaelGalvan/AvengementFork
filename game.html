<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>Avengement ‚Äî Play (7x7 fixed)</title>
<style>
  :root{
    --bg:#071019;--cell:#0f1720;--grid-gap:6px;--ally:#66d9ff;--enemy:#ff9b6b;--boss:#ffd166;--muted:#9aa8b3;
    --move-blue: rgba(102,217,255,0.22);
    --attack-red: rgba(255,155,107,0.22);
    --valid: rgba(255,255,255,0.03);
  }
  html,body{height:100%;margin:0;font-family:Inter,Segoe UI,Roboto,system-ui,-apple-system,Segoe UI Emoji;background:linear-gradient(180deg,var(--bg),#05202a);color:#e6eef3;display:flex;align-items:stretch}
  .sidebar{width:360px;padding:16px;background:#071522;border-right:1px solid rgba(255,255,255,0.03);display:flex;flex-direction:column;gap:12px;box-sizing:border-box}
  .main{flex:1;display:flex;flex-direction:column;align-items:center;justify-content:center;padding:18px;gap:12px}
  h1{margin:0;font-size:18px}
  .board { display:grid; grid-template-columns:repeat(7,80px); grid-template-rows:repeat(7,80px); gap:var(--grid-gap); padding:12px; background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01)); border-radius:12px; box-shadow:0 8px 28px rgba(0,0,0,0.6); }
  .cell{ width:80px;height:80px;background:var(--cell);border-radius:8px;display:flex;align-items:center;justify-content:center;position:relative;user-select:none;cursor:pointer; transition:transform .08s; }
  .cell:hover{ transform:translateY(-2px) }
  .cell.occupied{ cursor:pointer }
  .piece{ width:44px;height:44px;border-radius:8px;display:flex;align-items:center;justify-content:center;font-weight:700;color:#041019;box-shadow:0 6px 18px rgba(0,0,0,0.6);position:relative;font-size:18px }
  .piece.ally{ background:var(--ally) }
  .piece.enemy{ background:var(--enemy) }
  .piece.boss{ background:var(--boss); width:56px;height:56px;border-radius:10px;font-size:20px }
  .piece.selected{ outline:3px solid rgba(255,255,255,0.06); transform:translateY(-6px) }
  .rest-indicator{ position:absolute; right:-6px; top:-8px; font-size:12px; background:rgba(0,0,0,0.45); padding:2px 6px; border-radius:8px; color:#fff }

  .cell.move { box-shadow:0 0 0 4px var(--move-blue) inset }
  .cell.attack { box-shadow:0 0 0 4px var(--attack-red) inset }
  .cell.valid { box-shadow:0 0 0 4px var(--valid) inset }

  .panel{ background:rgba(255,255,255,0.02); padding:12px; border-radius:8px; color:var(--muted); display:flex; flex-direction:column; gap:8px }
  .muted{ color:var(--muted); font-size:13px }
  button{ background:#0b2330; border:1px solid rgba(255,255,255,0.04); color:#eaf6ff; padding:8px 12px; border-radius:8px; cursor:pointer }
  .small{ padding:6px 8px; font-size:13px }
  .ability-btn{ display:block; width:100%; text-align:left; padding:8px; border-radius:8px; background:#071c2b; border:1px solid rgba(255,255,255,0.03); cursor:pointer; margin-bottom:6px }
  .ability-btn.active{ outline:2px solid rgba(102,217,255,0.12); background:linear-gradient(180deg,#092532,#071c2b) }
  input[type=number]{ width:72px; padding:6px; border-radius:6px; border:1px solid rgba(255,255,255,0.06); background:transparent; color:#eaf6ff }
  .log{ background:rgba(255,255,255,0.02); padding:10px; border-radius:8px; min-height:120px; overflow:auto; font-size:13px }
  #rightSidebar{ width:360px; padding:16px; background:#071522; border-left:1px solid rgba(255,255,255,0.03); display:flex; flex-direction:column; gap:12px; box-sizing:border-box; overflow-y:auto; }
</style>
</head>
<body>
  <aside class="sidebar">
    <h1>Avengement ‚Äî Setup & Actions</h1>

    <div class="panel" id="setupPanel">
      <div style="display:flex;justify-content:space-between;align-items:center">
        <strong id="setupTitle">Player 1 ‚Äî Place 3 champions</strong>
        <span id="phaseLabel" class="muted">Phase: setup</span>
      </div>
      <p class="muted" id="setupHint">Choose champion type then click tiles on your starting row to place. Once 3 placed press Finish.</p>

      <div style="display:flex;gap:8px">
        <button id="btnFighter" class="ability-btn active" data-type="fighter">‚öî Fighter ‚Äî HP 7</button>
        <button id="btnRanger" class="ability-btn" data-type="ranger">üèπ Ranger ‚Äî HP 4</button>
      </div>

      <div style="display:flex;gap:8px">
        <button id="finishBtn" class="small" disabled>Finish Player 1</button>
        <button id="resetBtn" class="small">Reset</button>
      </div>

      <hr>

      <div style="display:flex;justify-content:space-between">
        <div><strong>Player 1 HP</strong><div id="hpAlly" class="muted">‚Äî</div></div>
        <div><strong>AP</strong><div id="apAlly" class="muted">‚Äî</div></div>
      </div>
      <div style="display:flex;justify-content:space-between">
        <div><strong>Player 2 HP</strong><div id="hpEnemy" class="muted">‚Äî</div></div>
        <div><strong>AP</strong><div id="apEnemy" class="muted">‚Äî</div></div>
      </div>
    </div>

    <div class="panel">
      <div style="display:flex;justify-content:space-between">
        <strong>Selected</strong>
        <div class="muted" id="turnLabel">Turn: ‚Äî</div>
      </div>
      <div style="display:flex;gap:8px">
        <div style="flex:1">
          <div class="muted">Name</div>
          <div id="selName">‚Äî</div>
        </div>
        <div style="flex:1">
          <div class="muted">HP</div>
          <div id="selHP">‚Äî</div>
        </div>
      </div>

      <div id="abilityArea">
        <button id="btnMove" class="ability-btn">Move (1 AP)</button>
        <button id="btnA1" class="ability-btn">Ability 1</button>
        <button id="btnA2" class="ability-btn">Ability 2</button>
        <button id="btnA3" class="ability-btn" style="display:none">Ultimate</button>

        <div id="bullBox" style="margin-top:8px;display:flex;gap:8px;align-items:center;display:none">
          <input id="bullInput" type="number" min="1" max="6" value="1"/>
          <button id="bullSet" class="small">Set Bullseye</button>
          <div class="muted">Spend AP for Bullseye</div>
        </div>

        <button id="btnRest" class="ability-btn">Rest (piece rests; +1 AP & +1 HP to owner)</button>
      </div>

      <div style="display:flex;gap:8px;margin-top:8px">
        <button id="btnEndTurn" class="small">End Turn</button>
      </div>
    </div>

    <div class="panel">
      <strong>Game Log</strong>
      <div class="log" id="log"></div>
    </div>
  </aside>

  <main class="main">
    <div style="display:flex;flex-direction:column;align-items:center">
      <div class="muted">Board (7√ó7)</div>
      <div id="board" class="board" role="grid" aria-label="Game board"></div>
    </div>
  </main>

  <aside class="sidebar" id="rightSidebar">
    <h1>Class Card</h1>
    <div id="cardContainer" style="display:flex;flex-direction:column;gap:12px">
      <div class="panel" style="text-align:center">
        <div id="cardTitle" class="muted" style="font-size:14px">Select a piece to view details</div>
        <div id="cardImage" style="width:100%;height:160px;background:rgba(255,255,255,0.04);border-radius:8px;margin:12px 0;display:flex;align-items:center;justify-content:center;color:var(--muted);font-size:12px">[Class Image Placeholder]</div>
        <div id="cardStats" style="display:none;gap:8px">
          <div style="display:flex;justify-content:space-between">
            <span>HP:</span>
            <strong id="cardHP">‚Äî</strong>
          </div>
          <div style="display:flex;justify-content:space-between">
            <span>Move:</span>
            <strong id="cardMove">‚Äî</strong>
          </div>
          <div style="display:flex;justify-content:space-between">
            <span>State:</span>
            <strong id="cardState">‚Äî</strong>
          </div>
        </div>
      </div>
      <div class="panel">
        <div id="cardAbilities" style="font-size:13px;color:var(--muted);line-height:1.6">
          <div style="margin-bottom:8px"><strong>Abilities:</strong></div>
          <div id="cardAbilityList">No piece selected</div>
        </div>
      </div>
      <div id="strengthPrompt" class="panel" style="display:none">
        <div style="margin-bottom:8px"><strong style="color:#66d9ff">Strength Available!</strong></div>
        <div class="muted" style="margin-bottom:8px;font-size:12px">Use Strength to displace the struck enemy to an adjacent square? (1 AP)</div>
        <div style="display:flex;gap:8px">
          <button id="btnStrengthYes" class="small" style="flex:1;background:#092532">Yes (1 AP)</button>
          <button id="btnStrengthNo" class="small" style="flex:1;background:#2a0000">No</button>
        </div>
      </div>
    </div>
  </aside>

<script src="scripts/game/champion.js"></script>
<script src="scripts/game/champions/fighter.js"></script>
<script src="scripts/game/champions/ranger.js"></script>
<script src="scripts/game/champions/bossDragon.js"></script>
<script src="scripts/game/utils.js"></script>
<script src="scripts/game/app.js"></script>
</body>
</html>
